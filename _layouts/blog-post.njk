{% extends '_layouts/layout.njk' %}

{% block main %}
  <div class="kim-!-padding-top-9 kim-!-padding-bottom-9">
    <div class="kimWrapper">
      <article itemscope itemtype="https://schema.org/BlogPosting">
        <div class="kimGrid">
          <div class="kimGrid_column kimGrid_column-full defiant:kimGrid_column-oneThird kim-!-margin-bottom-4">
            <a class="kimLink" href="{{ '/blog/' | url }}">&larr; Blog</a>
          </div>
          <header class="kimGrid_column kimGrid_column-full defiant:kimGrid_column-twoThirds">
            {% block title %}
              <h1 class="kimHeading-xl" itemprop="name">
                {{ title }}
              </h1>
            {% endblock %}
          </header>
        </div>
        <div class="kimGrid">
          <div class="kimGrid_column kimGrid_column-full defiant:kimGrid_column-oneThird kim-!-margin-bottom-5">
            {% block date %}
              {%- if date %}
                <p class="kimBody-l">
                  <time datetime="{{ date | htmlDateString }}" itemprop="dateCreated">
                    <span class="kim-!-sr">Posted on</span>
                    {{ date | readableDate }}
                  </time>
                </p>
              {%- endif %}
              {%- if updated %}
                <p class="kimBody-l">
                  <time datetime="{{ updated | htmlDateString }}" itemprop="dateModified">
                    <span class="kimBody">Last updated:</span><br>
                    {{ updated | readableDate }}
                  </time>
                </p>
              {%- endif %}
            {% endblock %}
            {%- if tags %}
              <nav aria-label="Post tags">
                <p class="kimBody kim-!-margin-bottom-1">Tagged as:</p>
                <ul class="kimList">
                  {% for tag in tags | filterTagList | sort %}
                    {% set tagUrl %}/blog/{{ tag | slugify }}/{% endset %}
                    <li>
                      <a href="{{ tagUrl | url }}" {%- if page.url === tagUrl %} aria-current="true"{% endif %}>{{ tag }}</a>
                    </li>
                  {% endfor %}
                </ul>
              </nav>
            {%- endif %}
            <hr class="kimRule">
          </div>
          <div class="kimGrid_column kimGrid_column-full defiant:kimGrid_column-twoThirds kimProse" itemprop="articleBody">
            {% block content  %}
              {{ content | smartquotes | safe }}
            {% endblock %}
          </div>
        </div>
        <div class="kim-!-sr"><a href="{{ siteDomain }}{{ page.url | url }}" itemprop="url">Permalink to this blog post</a></div>
      </article>
    </div>
  </div>
{% endblock %}