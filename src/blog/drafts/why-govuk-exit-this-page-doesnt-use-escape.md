---
title: Why GOV.UK's Exit this Page component doesn't use the Escape key
date: 9999-01-01
tags: [web development]
metadata:
  description: A very specific question, answered very longwindedly.
---

Last year (oh how time flies), we launched the [GOV.UK Design System's Exit this Page component](https://design-system.service.gov.uk/components/exit-this-page/), or EtP for short.

On the surface, it's a simple component. It's a big red button. It sticks to the top of the screen. If you click it, you get taken away to BBC Weather.

But it does so much more. If you, for example, press the <kbd>⇧ Shift</kbd> key on your keyboard three times, you get a visual indicator that you are activating the button. Upon the third press, the page you're on is blanked out and you're redirected away to... well, BBC Weather again.

It's intended to be a safety tool. A way for people in unstable, potentially violent, domestic situations to quickly leave the page. It's not perfect—as we found, the technical limitations involved mean it could never be perfect—but it's better than nothing.

But one question that comes up a lot is...

## Why Shift?

It's a decent question. Many other implementations of buttons like this exist, and of the ones that provide a keyboard shortcut, they almost universally use <kbd>Esc</kbd>.

And it's literally called Escape. Why wouldn't you use it for an escape function?

Basically: It doesn't quite work like that. There was a veritable rabbit hole of barriers that ultimately led us towards using a different key.

{% character character="ash", variant="thinking" %}
Do rabbit holes normally have barriers, actually?
{% endcharacter %}

### 1. Escape stops the browser from loading pages

In virtually all browsers, pressing <kbd>Esc</kbd> whilst a webpage is loading stops the loading process.

This is literally the last thing we want to happen for a feature whose sole job is to load a different page to the one you're on.

If we had used <kbd>Esc</kbd>, it would be too easy for a user to accidentally cancel the redirection process and end up stuck on the current page, and that'd be a bit naff.

### 2. Escape performs other functions in the operating system

In addition to cancelling loading, we found that the <kbd>Esc</kbd> key was used by too many other functions to reliably work at exiting the page.

For example, <kbd>Esc</kbd> is also used to exit fullscreen media (and on macOS, fullscreen apps), close modal dialogs and popovers (including those generated by native input controls), cancel a dragging interaction, clear a text input and dismiss notifications.

Assistive technologies also may use the Escape key for functionality, and it is also used as part of keyboard shortcuts.

All of these take priority over the page's JavaScript, which often meant needing to press the Escape key more than the requisite three times, creating confusion as to whether the function actually worked as advertised.

In the case of macOS and fullscreen apps, it even involved having to wait for the re-windowing animation to finish before the page could begin to intercept <kbd>Esc</kbd> keys again. Very not ideal.

### 3. Pressing Escape isn't considered a user interaction

Do you remember popup ads? When you'd open up a website and immediately a new window will have opened purely to shove advertising in your face?

How about autoplaying audio and videos? Or when pages begged you to stay when you tried to close them. Or those "do you want notifications from us?" dialogs.

These are all the result of people exploiting JavaScript's mostly-unrestricted ability to do stuff, usually to try and make money.

As a result of marketers being bastards, more and more of what the web platform can do is now being locked behind the requirement of [transient activation](https://developer.mozilla.org/en-US/docs/Glossary/Transient_activation)—that is, the browser will actively refuse to run pieces code unless it is _certain_ that the user intended for it to be ran.

Browsers use a few different heuristics to determine user interaction, including touches, mouse movements and keypresses. If it detects one of these that seems human enough, it will allow transiently activated code to run for a short period afterwards.

Redirecting the user away to another page via JavaScript is one such function that requires user interaction before it will run.

And <kbd>Esc</kbd> is [the _only_ keyboard key that doesn't count as user interaction](https://html.spec.whatwg.org/multipage/interaction.html#user-activation-processing-model:activation-triggering-input-event) for the purposes of transient activation.

This meant that if a user tried to use the EtP shortcut immediately after a page loaded, or after a short period having not interacted with the page (for example, if they were busy reading it), the redirection just wouldn't work. Totally doubleplus ungood.

## Alternative keys

With adequate evidence that <kbd>Esc</kbd> wouldn't work for us, we started looking at other non-typing keys we could use.

Testing with <kbd>⌃ Ctrl</kbd> worked much better, avoiding virtually all of the pitfalls of <kbd>Esc</kbd>. It's one major downfall—it conflicted with VoiceOver's default configuration: pressing <kbd>⌃ Ctrl</kbd> mutes VoiceOver.

The <kbd>⎇ Alt</kbd>/<kbd>⌥ Option</kbd> key, by comparison, was more problematic. As if being named differently on different systems wasn't bad enough.

The key's use for typing letters with diacritics and other 'alt codes' meant that the keypresses reported to the browser weren't always aligned with what physical keys the user had actually pressed, meaning we couldn't be reliably sure if the user was intending to exit the page or not.

<kbd>⎇ Alt</kbd>, like <kbd>Esc</kbd>, also had the issue of being utilised by some system level functions, like as a shortcut to access application menus.

In Chromium browsers on Windows, for example, pressing <kbd>⎇ Alt</kbd> would move keyboard focus out of the webpage and to the browser UI—completely removing the user from the webpage context and preventing subsequent keypresses from being detected. It was a total non-starter.

## Shift was better, but it's still not perfect

So we landed on <kbd>⇧ Shift</kbd>. Shift works more consistently than Escape did, but still has a bunch of caveats:

- It being used when typing meant needing to be careful about which presses actually counted towards activation.
- Pressing <kbd>⇧ Shift</kbd> three times requires many more presses if the Sticky Keys accessibility features is active. I found that it took between 6 and 9 presses with Windows Sticky Keys, depending on speed, and 9 presses with macOS Sticky Keys.
- macOS's Slow Keys feature still takes three presses, but they have to be spread across a period of a few seconds.
- [The JAWS screen reader in Chromium would register Shift key presses twice](https://github.com/FreedomScientific/standards-support/issues/699), though this has potentially been fixed since.
- Using <kbd>⇧ Shift</kbd> means that the shortcut is available on touch device's virtual keyboards. However, these keyboards tend to behave unpredictably compared to their hardware equivalents. I wrote up [a massive bug report just about how the Shift key behaves on iOS](https://github.com/alphagov/govuk-frontend/issues/4095), part of which subsequently became [a bug report](https://bugs.webkit.org/show_bug.cgi?id=273681).

## Conclusion

So that's where we are now. No one has complained about us using Shift instead of Escape, nor have we received any bug reports about it not working, but it is a choice that's raised eyebrows in some circles.

Hopefully this is a comprehensive enough write-up to explain why it is what it is.

As for the other major question we get...

## Why does it redirect the user to BBC Weather?

As civil servants, we didn't want to link to a news service as that could lead to claims of political bias.

I also argued (a lot) against linking to the Google homepage—despite this being ridiculously common—because... who uses the Google homepage? Google search is right there in your URL bar. Even if you do go to Google's homepage, the first action you normally take once there is to leave Google's homepage.

If you walked in on someone and they were nervously staring at Google's homepage, you'd be suspicious as hell.

BBC Weather's homepage is a contentful page. Users have a reason to be looking at it, and to be looking so for an extended period of time. It may even default to the user's location, displaying significantly more personalised content in the process, which is surely less suspicious.
